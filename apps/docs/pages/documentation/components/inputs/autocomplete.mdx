import ComponentsNav from "@/data/components-nav";
import { getLayoutProps } from "@/utils/get-layout-props";
import { PropsTable } from "@/components/doc/props-table";
import { KeyTable } from "@/components/shared/key-table";
import { Autocomplete } from "@wonderflow/react-components";

export const getStaticProps = () =>
  getLayoutProps({
    layout: "component",
    layoutProps: {
      title: "Autocomplete",
      color: "indigo",
      subtitle: "Decorate inputs with other elements to create a single field",
      navigation: ComponentsNav,
      features: [
        "Keyboard accessible",
        "Composable and full control over options",
        "Themes ready",
      ]
    }
  });

<LiveArea>
  <Autocomplete icon="magnifying-glass">
    <Autocomplete.Option value="apple">
      {`üçé Apple`}
    </Autocomplete.Option>
    <Autocomplete.Option
      value="banana"
      decoration={<Chip dimension="small" color="green">110 Cal</Chip>}
    >
      {`üçå Banana`}
    </Autocomplete.Option>
    <Autocomplete.Option value="cherry">
      {`üçí Cherry`}
    </Autocomplete.Option>
  </Autocomplete>
</LiveArea>

## Anatomy

```tsx lines="1,5-9"
import { Autocomplete } from "@wonderflow/react-components";

export default () => {
  return (
    <Autocomplete>
      <Autocomplete.Option value="1">Option 1</Autocomplete.Option>
      <Autocomplete.Option value="2">Option 2</Autocomplete.Option>
      <Autocomplete.Option value="3">Option 3</Autocomplete.Option>
    </Autocomplete>
  );
};
```

## API Reference

### Autocomplete

This component extends all the properties from [Textfield](/components/inputs/textfield#api-reference) and adds the following ones:

<PropsTable
  properties={[
    {
      name: "onChange",
      type: ["function"],
      typeValue: "({ query: string; value: string }) => void",
      default: "",
      required: false,
      description:
        "The callback called when an option is picked from the list or when user types into the textfield.",
    },
    {
      name: "maxHeight",
      type: ["string"],
      default: "200px",
      required: false,
      description:
        "Set the maximum height of the options list after which it will scroll.",
    },
    {
      name: "emptyContent",
      type: ["ReactNode"],
      default: "No results found",
      required: false,
      description:
        "Custom empty content to display when there are no options or when the value does not match any of the options.",
    },
    {
      name: "busy",
      type: ["boolean"],
      default: "false",
      required: false,
      description:
        "Set the busy state to show skeletons while the options are being fetched.",
    },
  ]}
/>

### Autocomplete.Option

This component extends all the properties from [Menu.Item](/components/navigation/menu#menuitem) and adds the following ones:

<PropsTable
  properties={[
    {
      name: "value",
      type: ["string"],
      default: "",
      required: true,
      dangerous: false,
      description:
        "Value of the option. This is the value that will be passed to the `onChange` callback.",
    },
    {
      name: "onClick",
      type: ["function"],
      typeValue: "(value?: string, content?: string) => void",
      default: "",
      required: false,
      description:
        "Callback called when the option is clicked. It passes the value and the inner text of the option as arguments.",
    },
    {
      name: "children",
      type: ["enum"],
      typeValue: "string | string[]",
      default: "",
      required: true,
      description:
        "Label of the option. This is the text that will be displayed in the option, which can be different from the value.",
    },
  ]}
/>

## Accessibility

### Keyboard interactions

<KeyTable
  data={[
    {
      name: "tab",
      description:
        "If the field is focused, move the focus on the listbox, otherwise move the focus on the field.",
    },
    {
      name: "arrowDown",
      description: "Inside the listbox, moves focus on the next element",
    },
    {
      name: "arrowUp",
      description: "Inside the listbox, moves focus on the previous element",
    },
    {
      name: "Enter",
      description: "Pick the option selected in the listbox.",
    },
  ]}
/>
